<ion-view>

	<ion-nav-buttons side="right">
		<div>
			<span class="orangeText"> HI {{vm.userName }}</span>
		</div>
	</ion-nav-buttons>

	<ion-content class="has-header"   overflow-scroll = "true">
		<div   class=" font_size_30px orangeText text_align_center headerTextMrg " >Upcoming Activitys</div>

		<div class="spinnerDiv" ng-show="vm.showSpinner"><span><ion-spinner icon="circles" class="spinner-energized"></ion-spinner></span></div>

		<div class ="row">
			<div style="position: relative;display: table;">
				<table class="mrg10px">
					<tr class="">
						<td>Search By State</td>
						<td class="  verticalalignmiddle">
							<input type="text" ng-model="vm.search.state" class="border1px " />
						</td>
					</tr>
				</table>
			</div>
			<div style="position: relative;display: table;">
				<table class="mrg10px">
					<tr>
						<td class="">Search By City</td>
						<td class=" verticalalignmiddle">
							<input type="text" ng-model="vm.search.city" class="border1px " />
						</td>
					</tr>
				</table>
			</div>

		</div>

		<div class ="row btmborder">
			<div class="col text_align_center">
				<button class="button   themBackgroundColor text_white" 
				ng-click="vm.searchActivity(vm.search)"
				>Search</button>
			</div>
		</div>

		<div class="with100p display_inlineflex mrgtopbtm10px searchbtn">
			<span class="ion-android-search font_size_30px orangeText"></span><input type="text" ng-model="vm.searchKeyword" class="border1px width90p" placeholder="Search in result">
		</div>
		<div  ng-repeat="activity in filtered = vm.activityNewList  | filter: vm.searchKeyword 
		| startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit" class="btmborder">

			<div class ="row">
				<div class="col3">
					<table>
						<tr>
							<td class="keytd">Date</td>
							<td class="valuetabletd with100p">
								<span ng-if="(activity.allActivity.Start_date)">{{activity.allActivity.Start_date | date }}</span>
								<span ng-if="(activity.allActivity.End_date)">
									to {{activity.allActivity.End_date | date }}</span>
								</td>
							</tr>
							<tr>
								<td class="keytd">Time</td>
								<td class="valuetabletd with100p">
									<span ng-if="(activity.allActivity.Start_time)">{{activity.allActivity.Start_time}}</span>
									<span ng-if="(activity.allActivity.End_time)">
										to {{activity.allActivity.End_time}}</span>
									</td>
								</tr>
								<tr ng-if="(activity.allActivity.Phone)">
									<td class="keytd">Phone</td>
									<td class="valuetabletd with100p">
										{{activity.allActivity.Phone}}

									</td>
								</tr>
								<tr ng-if="(activity.allActivity.Email)">
									<td class="keytd">Email</td>
									<td class="valuetabletd with100p">
										{{activity.allActivity.Email}}
									</td>
								</tr>
								<tr>
									<td class="keytd">Address</td>
									<td class="valuetabletd with100p">
										<address ng-click="vm.openMap(activity.allActivity.Address)"  parameter="activity.allActivity.Address"></address>
									</td>
								</tr>
							</table>
						</div>

						<div class="col3">
							<table>
								<tr>
									<td class="keytd">Activity</td>
									<td class="valuetabletd with100p">
										<span>{{activity.allActivity.Activity_type_id}}</span>

									</td>
								</tr>
							</table>
						</div>

						<div class="col3 resmrg10px">
							<table class="">
								<tr class="keytd">

									<td>
										<span ng-click="vm.detailAboutActivity(activity.allActivity)" class="ion-share font_size_20px mrgrgt20 orangeText resfontsize"></span>
									</td>
									<td ng-if='(activity.allActivity.Phone != "")'>
										<span ><a  href="tel:{{activity.Phone}}" class="ion-ios-telephone font_size_20px mrgrgt20 orangeText resfontsize"></a></span>
									</td>
									<td ng-if='(activity.allActivity.Email != "")'>
										<span><a href="mailto:{{activity.allActivity.Email}}" class="ion-email font_size_20px mrgrgt20 orangeText resfontsize"></a></span>
									</td>

									<td  ng-if='(activity.myActivity == "")'
									ng-click="vm.joinActivity(activity.allActivity,'Confirmed')" >
									<span class="ion-plus-circled font_size_20px mrgrgt20 orangeText resfontsize" 
									ng-if="!(vm.joinbtn == activity.allActivity._url)">Join</span> 
								</td>
								<td ng-if="(activity.myActivity == '')" ng-click="vm.joinActivity(activity.allActivity,'Tentative')" >
									<span class="ion-help-circled font_size_20px mrgrgt20 orangeText resfontsize" 
									ng-if="!(vm.tentativebtn == activity.allActivity._url)">Tentative</span>
								</td>
								<td  ng-if='((activity.myActivity != "") && (activity.myActivity.Status == "Tentative"))'
								ng-click="vm.updateActivityInfo(activity)" >
								<span class="ion-plus-circled font_size_20px mrgrgt20 orangeText resfontsize" 
								ng-if="!(vm.joinbtn == activity.allActivity._url)">Join</span> 
							</td>
							<td ng-if ='((activity.myActivity != "")&&(activity.myActivity.Status == "Confirmed"))'>
								<span class="font_size_20px mrgrgt20 orangeText resfontsize">Joined</span> 
							</td>
							<td ng-if="(vm.joinedbtn == activity.allActivity._url)">
								<span  class="font_size_20px mrgrgt20 orangeText resfontsize">Joined</span> 
							</td>
						</tr>
					</table>
				</div>

			</div>
			</div>{{currentPage}}
			<pagination  
	ng-model="currentPage"
	total-items="vm.activityNewList.length"
	max-size="noOfPages"  
	boundary-links="true" items-per-page="entryLimit">
</pagination>
		</ion-content>
	</ion-view>