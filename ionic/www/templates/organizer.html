<ion-view>

	<div class="bar bar-subheader floatingHeader background_transparent">
		<span  ng-show="vm.addActivityIcon" class="ion-plus-circled icons floatingbtn font_size_30px orangeText" ng-click="vm.showNewActivityForm()"></span>
	</div>

	<ion-content class="has-header"  overflow-scroll = "true">
		<div class="spinnerDiv" ng-show="vm.showSpinner">
			<span><ion-spinner icon="lines" class="spinner-energized"></ion-spinner></span>
		</div>

		<div   class="boldtext font_size_20px orangeText text_align_center headerTextMrg ">
			<span class="btmborder padding5px">Upcoming Events</span>
		</div>
		<div class="padding10">
			<div class ="row padding0">
				<div style="position: relative;display: table;" class="reswidth100p mrgrgt5p">
					<table class="reswidth100p">
						<tr class="">
							<td class="with50p verticalalignmiddle">Search By State</td>
							<td class=" with50p verticalalignmiddle">
								<input type="text" ng-model="vm.search.state" class="btmborder with100p " />
							</td>
						</tr>
					</table>
				</div>
				<div style="position: relative;display: table;" class="reswidth100p resmrg_top5p ">
					<table class="reswidth100p">
						<tr>
							<td class="with50p verticalalignmiddle">Search By City</td>
							<td class="with50p verticalalignmiddle">
								<input type="text" ng-model="vm.search.city" class="btmborder with100p" />
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class ="row padding0 mrg_top10px">
				<div class="col text_align_center btmborder">
					<button class="button   themBackgroundColor text_white" 
					ng-click="vm.searchActivity(vm.search)"
					>Search</button>
				</div>
			</div>
		</div>
		<div class="list list-inset btmborder ">
			<label class="item item-input bordernone padding0">
				<i class="icon ion-search placeholder-icon"></i>
				<input type="text" placeholder="Search in result" ng-model="vm.searchKeyword">

			</label>
		</div>
		<div>
			<span class="padding10 line_height3 verticalalignmiddle orangeText">Found {{vm.activityData.length}} results</span>
			<button class="button themBackgroundColor  text_white float_right bordernone mrgrgt10" 
			ng-click="vm.routingTOMapView(vm.activityData)">Map View</button>
		</div>

		<div  ng-repeat="activity in filtered = vm.activityData | filter: vm.searchKeyword 
		| startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">
		<div class="padding10">
			<div class ="row valuetabletd  btmborder selectable">
				<div class="col3 padding_right5p">
					<div class="position_relative displayflex">
						<div class="with40p reswith30p">Date</div>
						<div class="with60p reswith70p">
							<span ng-if="(activity.Start_date)">{{activity.Start_date | date }}</span>
							<span ng-if="(activity.End_date)">
								to {{activity.End_date | date }}</span>
							</div>
						</div>

						<div class="position_relative displayflex">
							<div class="with40p reswith30p">Time</div>
							<div class="with60p reswith70p">
								<span ng-if="(activity.Start_time)">{{activity.Start_time}}</span>
								<span ng-if="(activity.End_time)">
									to {{activity.End_time}}</span>
								</div>
							</div>

							<div class="position_relative displayflex" ng-if="(activity.Phone)">
								<div class="with40p reswith30p">Phone</div>
								<div class="with60p reswith70p">
									<span >{{activity.Phone}}</span>
								</div>
							</div>

							<div class="position_relative displayflex" ng-if="(activity.Email)">
								<div class="with40p reswith30p">Email</div>
								<div class="with60p reswith70p">
									<span>{{activity.Email}}</span>
								</div>
							</div>

							<div class="position_relative displayflex">
								<div class="with40p reswith30p">Address</div>
								<div class="with60p reswith70p">
									<span><address parameter="activity.Address"></address>
									</span>
								</div>
							</div>
						</div>
						<div class="col3 padding_right5p">
							<div class="position_relative displayflex">
								<div class="with40p reswith30p">Activity</div>
								<div class="with60p reswith70p">
									<span>{{activity.Activity_type}}</span>
								</div>
							</div>
						</div>

						<div class="col3 resmrg_top5p resbtmborder">
							<div class="position_relative displayflex with100p">
								<div class="with100p">
									<span ng-click="vm.detailAboutActivity(activity)" class="icons ion-share font_size_30px mrgrgt20 orangeText"></span>

									<span ng-if='(activity.Phone)'>
										<a  href="tel:{{activity.Phone}}" class="icons ion-ios-telephone font_size_30px mrgrgt20 orangeText "></a>
									</span>
									<span ng-if='(activity.Email)'>
										<a href="mailto:{{activity.Email}}" class="icons ion-email font_size_30px mrgrgt20 orangeText "></a>
									</span>
									<span>
										<span ng-click="vm.openMap(activity.Address)"  class="icons ion-android-pin font_size_30px mrgrgt20 orangeText "></span>
									</span>
									<span ng-click="vm.updateActivity(activity)">
										<span  class="ion-edit icons font_size_30px mrgrgt20 orangeText"></span> 
									</span>
									<span ng-click="vm.deleteActivity(activity)">
										<span  class="ion-trash-a icons font_size_30px mrgrgt20 orangeText"></span>
									</span>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
			<div class="display_inlineflex margin0auto with100p"><pagination  
				ng-model="currentPage"
				total-items="vm.activityData.length"
				max-size="5"  
				boundary-links="true" items-per-page="entryLimit" boundary-link-numbers = "true">
			</pagination></div>

		</ion-content>

	</ion-view>
