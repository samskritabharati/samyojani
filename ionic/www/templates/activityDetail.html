<ion-view>
	
	<div class="bar bar-subheader floatingHeader" ng-if="!(vm.role == 'Student')">

		<span class="ion-plus-circled icons floatingbtn font_size_30px orangeText" ng-click="vm.showAddPerticipantForm()">
		</span>
	</div>
	<ion-content class="has-header " overflow-scroll = "true">
		
		<div class="spinnerDiv" ng-show="vm.showSpinner"><span><ion-spinner icon="lines" class="spinner-energized"></ion-spinner></span></div>
		<button class="button themBackgroundColor  text_white float_right bordernone mrgrgt10" 
			ng-click="vm.backToActivity()">Back to Activity</button>
		<!-- <div   class=" orangeText text_align_center headerTextMrg " > <span class="font_size_30px">Activity Detail</span></div> -->
			<!-- <span class="float_right orangeText" ng-click="vm.backToActivity()"><button class="themBackgroundColor bordernone text_white padding5px font_size_15px" ng-click="vm.backToActivity()">Back to Activity</button></span> -->
			<div   class="boldtext font_size_20px orangeText text_align_center headerTextMrg ">
			<span class="btmborder padding5px">Activity Detail</span></div>
		
			
		
		<div class="padding10 font_size_20px mrg_btm10px orangeText text_align_center">
			{{vm.activityDetail.activity_type_id}}:&nbsp{{vm.activityDetail.activity_name}}

		</div>

		<div class="padding10">
			<div class="row padding0" style="display: flex !important; ">
				<div class="with20p reswith40p paddingleft10 bg_lightgry text_black line_height2p5">Recurrence</div>
				<div class="with80p reswith60p paddingleft10">
					{{vm.activityDetail.activity_recurrence}}
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; ">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Time</div>
				<div class="with80p reswith60p paddingleft10">
					<span ng-if="(vm.activityDetail.activity_start_date)">{{vm.activityDetail.activity_start_time}}</span>
								<span ng-if="(vm.activityDetail.activity_end_time)">
									to {{vm.activityDetail.activity_end_time}}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; ">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Coordinator Name</div>
				<div class="with80p reswith60p paddingleft10">
					{{vm.activityDetail.coordinator_Name}}
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; " ng-if="(vm.activityDetail.activity_start_date)">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Date</div>
				<div class="with80p reswith60p paddingleft10">
					<span >{{vm.activityDetail.activity_start_date  | date }}</span>
					<span if="(vm.activityDetail.activity_end_date)">to {{vm.activityDetail.activity_end_date  | date }}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; " ng-if="(vm.activityDetail.activity_phone)">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Phone</div>
				<div class="with80p reswith60p paddingleft10">
					<span >{{vm.activityDetail.activity_phone}}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; " ng-if="!(vm.activityDetail.activity_phone)">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Phone</div>
				<div class="with80p reswith60p paddingleft10">
					<span>{{vm.activityDetail.coordinator_Phone}}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; " ng-if="(vm.activityDetail.activity_email)">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Email</div>
				<div class="with80p reswith60p paddingleft10">
					<span >{{vm.activityDetail.activity_email}}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; " ng-if="!(vm.activityDetail.activity_email)">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Email</div>
				<div class="with80p reswith60p paddingleft10">
					<span >{{vm.activityDetail.coordinator_Email}}</span>
				</div>
			</div>
			<div class="row mrg_top10px padding0" style="display: flex !important; ">
				<div class="with20p reswith40p bg_lightgry text_black line_height2p5 paddingleft10">Address</div>
				<div class="with80p reswith60p paddingleft10">
					<span>
										<span ng-if='vm.activityDetail.activity_address.Line1'>{{vm.activityDetail.activity_address.Line1}},</span>

										<span ng-if='vm.activityDetail.activity_address.Line2'>{{vm.activityDetail.activity_address.Line2}},</span>
										<span ng-if='vm.activityDetail.activity_address.City'>{{vm.activityDetail.activity_address.City}},</span>

										<span ng-if="vm.activityDetail.activity_address.District">{{vm.activityDetail.activity_address.District}},</span>

										<span ng-if="vm.activityDetail.activity_address.State">{{vm.activityDetail.activity_address.State}},</span>

										<span ng-if="vm.activityDetail.activity_address.Country">{{vm.activityDetail.activity_address.Country}},</span> 

										<span ng-if="vm.activityDetail.activity_address.Postal_code">{{vm.activityDetail.activity_address.Postal_code}}.</span>
				</div>
			</div>
		</div>

					<div   class="boldtext font_size_20px orangeText text_align_center headerTextMrg ">
			<span class="btmborder padding5px">Participants</span></div>
					<div  ng-repeat="participant in vm.participentDetailList" class="">
					<div class="padding10">
						<div class="row padding0">
							<div class="col3 padding_right5p ">
								<div class="position_relative displayflex resmrg_top5p">
											<div class="with40p reswith40p">Name</div>
											<div class="with60p reswith60p">
											<span>{{participant.participantInfo.Name}}</span>
										</div>
									</div>
									<div class="position_relative displayflex resmrg_top5p">
											<div class="with40p reswith40p">Role</div>
											<div class="with60p reswith60p">
											<span>{{participant.participantStatus.EventRole}}</span>
										</div>
									</div>
							</div>
							<div class="col3 padding_right5p ">
							
									<div class="position_relative displayflex resmrg_top5p">
											<div class="with40p reswith40p">Current Status</div>
											<div class="with60p reswith60p">
											<span>{{participant.participantStatus.Status}}</span>
										</div>
									</div>
									<div class="position_relative displayflex resmrg_top5p">
											<div class="with40p reswith40p">Registration Date</div>
											<div class="with60p reswith60p">
											<span>{{participant.participantStatus.Last_active_date | date}}</span>
										</div>
									</div>
								
							</div>
							<div class="col3 padding_right5p resmrg_top5p resbtmborder" resmrg10px" ng-if="!(vm.role == 'Student')">
								<div class="position_relative displayflex">
									<div class="with100p">
										<span ng-click="vm.showFormToUpdatePerticipantInActivity(participant)" class="ion-edit icons font_size_20px mrgrgt20 orangeText resfontsize"></span>
									
										<span ng-click="vm.deleteUserFromActivity(participant)" class="ion-trash-a icons font_size_20px mrgrgt20 orangeText resfontsize"></span>
									</div>
								</div>
							</div>
						</div>
						</div>
					</div>
				

				<script id="editUserInActivity.html" type="text/ng-template">
					<ion-modal-view>										
						<!-- <ion-header-bar class="bar bar-header button-clear">
							<h1 class="title orangeText">Edit Detail</h1>
							<button class="button  button-light" ng-click="vm.closeModel()">
								<span class="ion-android-cancel orangeText font_size_20px"></span>
							</button>
						</ion-header-bar> -->
						<ion-header-bar class="bar bar-header button-clear">
					<div class="text_align_center with100p">
						<span class="btmborder padding5px orangeText font_size_20px boldtext">Edit Detail</span>
						<button class="button  button-light float_right background_transparent mrgrgt5p resmrg_right10p" ng-click="vm.closeModel()">
							<span class="ion-android-cancel orangeText font_size_20px"></span>
						</button>
					</div>
				</ion-header-bar>
						<ion-content overflow-scroll = "true" class="">
							<div class="mrgtop025">
							<div class="row mrg_top5px">
								<div class="col">	Name
									<input type="text" ng-model="vm.userActivityDetailToEdit.participantInfo.Name" class="with100p btmborder">
								</div>
							</div>
							
							<div class="row mrg_top5px">
								<div class="col">	Role
									<select  ng-model="vm.userActivityDetailToEdit.participantStatus.EventRole" ng-options="v for v in vm.userRole" class="bordernone btmborder with100p">
										<option value="" disabled selected="selected" style="display: none;">{{vm.userActivityDetailToEdit.participantStatus.EventRole}}</option>
									</select>
								</div>
							</div>
							
							<div class="row mrg_top5px">
								<div class="col">	Status
									<select  ng-model="vm.userActivityDetailToEdit.participantStatus.Status" ng-options="v for v in vm.activityEnrollTypes" class="bordernone with100p btmborder"></select>
								</div>
							</div>

							<div class="text_align_center">
								<button class="button themBackgroundColor text_white" 
								ng-click="vm.updateUserDetailFromActivity(vm.userActivityDetailToEdit)" type="submit">Update </button>
							</div>
							</div>
						</ion-content>
					</ion-modal-view>

				</ion-content>
			</ion-modal-view>
		</script>

		<!-- <script id="addPerticipantToActivity.html" type="text/ng-template">
			<ion-modal-view style="height: 0%; width:20%" scroll="false">
			
				<ion-header-bar class="bar bar-header button-clear">
					<div class="text_align_center with100p">
						<span class="btmborder padding5px orangeText font_size_20px boldtext">New Participant</span>
						<button class="button  button-light float_right background_transparent mrgrgt5p resmrg_right10p" ng-click="vm.closeModelAndRefeshParticipant()">
							<span class="ion-android-cancel orangeText font_size_20px"></span>
						</button>
					</div>
				</ion-header-bar>
				<ion-content  overflow-scroll = "false">
					

<div class="row" style="margin-top: 10%">
	<div class="col text_align_center"><button class="button  themBackgroundColor text_align_center text_white" ng-click="vm.seacrchForUser()" type="submit">Existing User</button></div>
	</div>
</div>
<div class="text_align_center">---- OR -----</div>
<div class="row">
	<div class="col text_align_center">
	<button class="button  themBackgroundColor text_align_center text_white" ng-click="vm.newUser()" type="submit">New User</button>
	</div>
	</div>
	
				</ion-content>
			</ion-modal-view>
		</script> -->
<script id="chooseUser.html" type="text/ng-template">
	<ion-modal-view>                                        
		<ion-header-bar class="bar bar-header button-clear">
			<div class="text_align_center with100p">
				<span class="btmborder padding5px orangeText font_size_20px boldtext">Search For User</span>
				<button class="button  button-light float_right background_transparent mrgrgt5p resmrg_right10p" ng-click="vm.closeModel()">
					<span class="ion-android-cancel orangeText font_size_20px"></span>
				</button>
			</div>
		</ion-header-bar>
		<ion-content  overflow-scroll = "true" >

			<div class="spinnerDiv" ng-show="vm.showSpinner"><span><ion-spinner icon="lines" class="spinner-energized"></ion-spinner></span></div>
			<div class="padding10">
				<div class ="row padding0">
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">Name</div>
							<div class="with50p">
								<span> <input type="text" ng-model="vm.search.name" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">Email</div>
							<div class="with50p">
								<span> <input type="text" ng-model="vm.search.email" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">Phone</div>
							<div class="with50p">
								<span><input type="text" ng-model="vm.search.phone" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
				</div>
				<div class ="row padding0">
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">Role</div>
							<div class="with50p">
								<span>  <select  ng-model="vm.search.role" ng-options="v for v in vm.userRole" class="bordernone with100p btmborder padding5px"></select></span>
							</div>
						</div>
					</div>
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">Country</div>
							<div class="with50p">
								<span> <input type="text" ng-model="vm.search.country" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
					<div class="col3 mrgrgt5p resmrgbtm10">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">State</div>
							<div class="with50p">
								<span><input type="text" ng-model="vm.search.state" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
				</div>
				<div class ="row padding0">
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with50p">City</div>
							<div class="with50p">
								<span>  <input type="text" ng-model="vm.search.city" class="btmborder with100p" /></span>
							</div>
						</div>
					</div>
					<div class="col3 mrgrgt5p">
						<div class="position_relative displayflex mrg_top5px">

						</div>
					</div>
					<div class="col3 mrgrgt5p resmrgbtm10">
						<div class="position_relative displayflex mrg_top5px">

						</div>
					</div>
				</div>

				<div class ="row padding0 mrg_top10px">
					<div class="col text_align_center btmborder">
						<button class="button   themBackgroundColor text_white" 
						ng-click="vm.searchUser(vm.search)"
						>Search</button>
					</div>
				</div>
			</div>
			<div  ng-repeat="user in filtered = vm.user.data | filter: vm.searchKeywordForUser 
			| startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">


			<div class="padding10">

				<div class ="row padding0 btmborder">
					<div class="col3 padding5px">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with30p reswith30p">Name</div>
							<div class="with70p reswith70p">
								<span> {{user.Name }}</span>
							</div>
						</div>
						<div class="position_relative displayflex mrg_top5px" ng-if="(user.Phone)">
							<div class="with30p reswith30p">Phone</div>
							<div class="with70p reswith70p">
								<span> {{user.Phone }}</span>
							</div>
						</div>
						<div class="position_relative displayflex mrg_top5px" ng-if="(user.Email)">
							<div class="with30p reswith30p">Email</div>
							<div class="with70p reswith70p">
								<span> {{user.Email }}</span>
							</div>
						</div>
						<div class="position_relative displayflex mrg_top5px">
							<div class="with30p reswith30p">Address</div>
							<div class="with70p reswith70p">
								<span> <address vm.openMap(user.Address) parameter="user.Address"></address></span>
							</div>
						</div>
					</div>
					<div class="col3 padding5px">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with30p reswith30p">Role</div>
							<div class="with70p reswith70p">
								<span> {{user.Role}}</span>
							</div>
						</div>

					</div>
					<div class="col3 padding5px resmrg_top5p resbtmborder">
						<div class="position_relative displayflex mrg_top5px">
							<div class="with100p">
								<span>
									<button ng-click="vm.choosedUser(user)" class="button themBackgroundColor text_white float_right">Select</button>
								</span>


							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="display_inlineflex margin0auto with100p"><pagination  ng-model="currentPage" total-items="vm.user.data.length" max-size="noOfPages"  boundary-links="true" items-per-page="entryLimit">
		</pagination></div>

	</ion-content>
</ion-modal-view>
</script>

<script id="perticipantDetailToActivity.html" type="text/ng-template">
			<ion-modal-view>
			
				<ion-header-bar class="bar bar-header button-clear">
					<div class="text_align_center with100p">
						<span class="btmborder padding5px orangeText font_size_20px boldtext">Add New Participant</span>
						<button class="button  button-light float_right background_transparent mrgrgt5p resmrg_right10p" ng-click="vm.closeModelAndRefeshParticipant()">
							<span class="ion-android-cancel orangeText font_size_20px"></span>
						</button>
					</div>
				</ion-header-bar>
				<ion-content overflow-scroll = "true" class="restop0">
					<div class="spinnerDiv" ng-show="vm.showSpinner"><span><ion-spinner icon="circles" class="spinner-energized"></ion-spinner></span></div>


					 <form name="form" class="mrg25px" novalidate>
						
						<div class="row mrg_top5px">
							<div class="col">	Name
								<input type="text" ng-model="vm.participant.Name" class="with100p btmborder" >
							</div>
						</div>
						
						<div class="row mrg_top5px">
							<div class="col">	Email
								<input type="email" ng-model="vm.participant.Email" class="with100p btmborder">
							</div>
						</div>
						
						<div class="row mrg_top5px">
							<div class="col">	Phone
								<input type="text" ng-model="vm.participant.Phone" class="with100p btmborder">
							</div>
						</div>
						
						<div class="row mrg_top5px">
							<div class="col">	Role
								<select  ng-model="vm.participant.Role" ng-options="v for v in vm.userRole" class="bordernone btmborder with100p"></select>
							</div>
						</div>

						
						<div class="row mrg_top5px">
							<div class="col">Status
								<select  ng-model="vm.participant.Status" ng-options="v for v in vm.activityEnrollTypes" class="bordernone with100p btmborder"></select>
							</div>
						</div>

						<div class="row mrg_top5px valuetabletd">
							<div class="col text_align_center">
								<button class="button  themBackgroundColor text_align_center text_white" ng-click="vm.addParticipentToActivity(vm.participant)" type="submit">Add </button>
							</div>
						</div>
						<div ng-show="vm.participantAdded" class="ion-checkmark-circled text_align_center font_size_15px" style="color:green">Participant added</div>
					</form> 
				</ion-content>
			</ion-modal-view>
		</script>
<script id="newUsersForm.html" type="text/ng-template">
		<ion-modal-view>
			<ion-header-bar class="bordernone padding0">

				<div class="text_align_center with100p">
					<span class="btmborder padding5px orangeText font_size_20px boldtext">Add New User</span>
					<button class="button  button-light float_right background_transparent mrgrgt42" ng-click="vm.closeModel()">
						<span class="ion-android-cancel orangeText font_size_20px"></span>
					</button>
				</div>
			</ion-header-bar>
			<ion-content overflow-scroll = "true" >

				<div class="spinnerDiv" ng-show="vm.showSpinner"><span><ion-spinner icon="circles" class="spinner-energized"></ion-spinner></span></div>

				<div class="mrg25px">
				 	<form name="newUserForm">
						<div class="row mrg_top5px">
							<div class="col">	Name
								<input type="text" ng-model="vm.NewUserData.Name" class="with100p btmborder">
							</div>
						</div>

						<div class="row mrg_top5px">
							<div class="col">	Email
								<input type="email" ng-model="vm.NewUserData.Email" class="with100p btmborder" 
								ng-required="!(vm.NewUserData.Email ||vm.NewUserData.Phone)" >
							</div>
						</div>

						<div class="row mrg_top5px">
							<div class="col">	Phone
								<input type="text" ng-model="vm.NewUserData.Phone" class="with100p btmborder" 
								name="phonenumber" ng-pattern="/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/"ng-required="!(vm.NewUserData.Email ||vm.NewUserData.Phone)"/>
							</div>

						</div>

						<div class="row mrg_top5px">
							<div class="col">	Role
								<select  ng-model="vm.NewUserData.Role" ng-options="v for v in vm.userRole" class="bordernone with100p btmborder padding6px">
									<option value="" disabled selected="selected" style="display: none;">Choose role</option>
								</select>
							</div>
						</div>

						<div class="row mrg_top5px padding0">
							<div class="col text_align_center">
								<button class="button themBackgroundColor text_align_center text_white" 
								ng-click="vm.addNewUser(vm.NewUserData)" type="submit" ng-disabled="!newUserForm.$valid">Add </button>
							</div>
						</div>
						<div class="text_align_center font_size_15px orangeText">Email or Phone number is required</div>
						<div ng-show="vm.userAdded" class="ion-checkmark-circled text_align_center font_size_15px" style="color:green">User added</div>
						<div ng-show="vm.userExit" class="ion-checkmark-circled text_align_center font_size_15px" style="color:green">User already enroled</div>
					</form>
				</div>

			</ion-content>
		</ion-modal-view>
	</script> 

	</ion-content>
</ion-view>